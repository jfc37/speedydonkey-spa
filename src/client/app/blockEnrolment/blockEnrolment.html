<page-title>Block Selection</page-title>

<div ng-if="vm.anyBlocks()">
    <section>
        <section-content>
            <super-action-button ng-disabled="!vm.isAnyBlocksSelected()" ng-click="vm.submit()">Enrol</super-action-button>
        </section-content>
    </section>

    <section ng-repeat="blocksOnDay in vm.blocksByDays | orderBy:'day'">
        <section-title>
            Starting {{blocksOnDay.title}}
        </section-title>

        <section-content>
            <flex-box>
                <product-box class="col-md-4 col-sm-6 col-xs-12" ng-repeat="block in blocksOnDay.blocks | orderBy:'startDate'">
                    <product-title>{{block.name}}</product-title>

                    <product-description>
                        {{block.startTimeDisplay}} - {{block.endTimeDisplay}}
                    </product-description>

                    <product-action>
                        <label ng-if="!block.isAlreadyRegistered && block.spacesAvailable > 0">
                            <input type="checkbox" icheck ng-model="block.enrolIn"> Enrol
                        </label>
                        <label ng-if="block.isAlreadyRegistered ">
                            Already enrolled
                        </label>
                        <spaces-available number="block.spacesAvailable"></spaces-available>
                    </product-action>
                </product-box>
            </flex-box>

        </section-content>

    </section>

    <section>
        <section-content>
            <super-action-button ng-disabled="!vm.isAnyBlocksSelected()" ng-click="vm.submit()">Enrol</super-action-button>
        </section-content>
    </section>
</div>

<div ng-if="!vm.anyBlocks()">
    <section>
        <section-content>
            <p class="lead">
                There are no blocks available to enrol in
            </p>
        </section-content>
    </section>
</div>
