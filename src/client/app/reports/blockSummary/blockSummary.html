<page-title>Block Summary</page-title>

<section>
    <section-title>Filter</section-title>

    <section-content>
        <section-form ng-form="form">

            <section-group input-name="from">
                <section-group-label>Starting between</section-group-label>

                <section-group-content>
                    <jfc-date-picker ng-model="vm.filter.from" name="from"></jfc-date-picker>
                </section-group-content>
            </section-group>

            <section-group-separator></section-group-separator>

            <section-group input-name="to">
                <section-group-label>And</section-group-label>

                <section-group-content>
                    <jfc-date-picker ng-model="vm.filter.to" name="to"></jfc-date-picker>
                </section-group-content>
            </section-group>

            <div class="pull-right">
                <run-report-button ng-disabled="form.$invalid" ng-click="vm.run()"></run-report-button>
                <download-csv-button ng-disabled="form.$invalid" ng-click="vm.downloadCsv()"></download-csv-button>
            </div>
        </section-form>
    </section-content>
</section>


<section>
    <section-content>

        <table class="table table-hover" ts-wrapper>
            <thead>
                <tr>
                    <th ts-criteria="name" ts-default>Name</th>
                    <th ts-criteria="attendance">Attendance</th>
                    <th ts-criteria="revenue">Revenue</th>
                    <th ts-criteria="expenses">Expenses</th>
                    <th ts-criteria="profit">Profit</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="block in vm.blocks">
                    <td>
                        <a ng-click="vm.openBlockDetails(block)" class="btn btn-link">{{block.name}}</a>
                    </td>
                    <td>{{block.attendance | number}}</td>
                    <td>{{block.revenue | currency}}</td>
                    <td>{{block.expenses | currency}}</td>
                    <td>{{block.profit | currency}}</td>
                </tr>

                <tr no-items-row items="vm.blocks"></tr>

            </tbody>
        </table>
    </section-content>
</section>
